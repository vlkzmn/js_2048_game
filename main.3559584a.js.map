{"version":3,"sources":["scripts/main.js"],"names":["gameField","change","score","button","document","querySelector","startMessages","loseMessages","winMessages","elementScore","cells","querySelectorAll","fillGameField","board","count","stopGame","cellListNum","forEach","element","i","item","j","textContent","className","removeEventListener","keyPress","classList","remove","gerRandom小oordinate","Math","floor","random","addCell","row","col","stepX","reverse","filter","el","innerText","length","toString","stepY","rotatedBoard","map","nextCell","setTimeout","e","preventDefault","code","addEventListener","contains","hidden","add"],"mappings":";AAAA,aA2IA,SAAA,EAAA,GAAA,OAAA,EAAA,IAAA,EAAA,IAAA,EAAA,IAAA,IAAA,SAAA,IAAA,MAAA,IAAA,UAAA,wIAAA,SAAA,EAAA,EAAA,GAAA,GAAA,EAAA,CAAA,GAAA,iBAAA,EAAA,OAAA,EAAA,EAAA,GAAA,IAAA,EAAA,OAAA,UAAA,SAAA,KAAA,GAAA,MAAA,GAAA,GAAA,MAAA,WAAA,GAAA,EAAA,cAAA,EAAA,EAAA,YAAA,MAAA,QAAA,GAAA,QAAA,EAAA,MAAA,KAAA,GAAA,cAAA,GAAA,2CAAA,KAAA,GAAA,EAAA,EAAA,QAAA,GAAA,SAAA,EAAA,GAAA,GAAA,oBAAA,QAAA,OAAA,YAAA,OAAA,GAAA,OAAA,MAAA,KAAA,GAAA,SAAA,EAAA,GAAA,GAAA,MAAA,QAAA,GAAA,OAAA,EAAA,GAAA,SAAA,EAAA,EAAA,IAAA,MAAA,GAAA,EAAA,EAAA,UAAA,EAAA,EAAA,QAAA,IAAA,IAAA,EAAA,EAAA,EAAA,IAAA,MAAA,GAAA,EAAA,EAAA,IAAA,EAAA,GAAA,EAAA,GAAA,OAAA,EAzIA,IAAIA,EAEAC,EADAC,EAAQ,EAENC,EAASC,SAASC,cAAc,UAChCC,EAAgBF,SAASC,cAAc,kBACvCE,EAAeH,SAASC,cAAc,iBACtCG,EAAcJ,SAASC,cAAc,gBACrCI,EAAeL,SAASC,cAAc,eACtCK,EAAQN,SAASO,iBAAiB,eAExC,SAASC,EAAcC,GACjBC,IAAAA,EAAQ,EACRC,GAAW,EACXC,EAAc,EAElBH,EAAMI,QAAQ,SAACC,EAASC,GACtBD,EAAQD,QAAQ,SAACG,EAAMC,GACjBD,GACFV,EAAMM,GAAaM,YAAcF,EACjCV,EAAMM,GAAaO,UAAsCH,0BAAAA,OAAAA,GAE5C,OAATA,IACFhB,SAASoB,oBAAoB,UAAWC,GACxCjB,EAAYkB,UAAUC,OAAO,WAG/Bb,KAEIM,IAASP,EAAMM,GAAGE,EAAI,IAAOF,EAAI,GAAKC,IAASP,EAAMM,EAAI,GAAGE,MAC9DN,GAAW,KAGbL,EAAMM,GAAaM,YAAc,GACjCZ,EAAMM,GAAaO,UAAY,cAEjCP,QAIU,KAAVF,IAA6B,IAAbC,IAClBX,SAASoB,oBAAoB,UAAWC,GACxClB,EAAamB,UAAUC,OAAO,WAIlC,SAASC,IACAC,OAAAA,KAAKC,MAAsB,EAAhBD,KAAKE,UAGzB,SAASC,EAAQnB,GACXoB,IAAAA,EAAKC,EAEN,GACDD,EAAML,IACNM,EAAMN,UACCf,EAAMoB,GAAKC,IAEpBrB,EAAMoB,GAAKC,GAAOL,KAAKE,SAAW,GAAM,EAAI,EAG9C,SAASI,EAAMtB,GAAOuB,IAAAA,EAAU,UAAA,OAAA,QAAA,IAAA,UAAA,IAAA,UAAA,GA4BvBvB,OA3BPZ,GAAS,EAETY,EAAMI,QAAQ,SAACG,EAAMD,GACfc,IAAAA,EAAMb,EAAKiB,OAAO,SAAAC,GAAMA,OAAO,IAAPA,KAE5BL,EAAMG,EAAUH,EAAIG,UAAYH,GAE5BhB,QAAQ,SAACqB,EAAIjB,GACXiB,IAAOL,EAAIZ,EAAI,KACjBY,EAAIZ,IAAM,EACVnB,GAAS+B,EAAIZ,GACbZ,EAAa8B,UAAYrC,EACzB+B,EAAIZ,EAAI,GAAK,KAIjBY,EAAMA,EAAII,OAAO,SAAAC,GAAMA,OAAO,IAAPA,KACvBL,EAAUA,GAAAA,OAAAA,EAAAA,GAAK,CAAA,EAAG,EAAG,EAAG,KACpBO,OAAS,GACbP,EAAMG,EAAUH,EAAIG,UAAYH,GAExBQ,aAAerB,EAAKqB,aAC1B5B,EAAMM,GAAKc,EACXhC,GAAS,KAINY,EAGT,SAAS6B,EAAM7B,GAAOuB,IAAAA,EAAU,UAAA,OAAA,QAAA,IAAA,UAAA,IAAA,UAAA,GAC1BO,EAAe9B,EAAM+B,IAAI,SAACN,EAAInB,GAChCmB,OAAAA,EAAGM,IAAI,SAACxB,EAAMC,GAAMR,OAAAA,EAAMQ,GAAG,EAAIF,OAW5BN,OARP8B,EAAeR,EAAMQ,EAAcP,IAEtBnB,QAAQ,SAACC,EAASC,GAC7BD,EAAQD,QAAQ,SAACG,EAAMC,GACrBR,EAAMM,GAAGE,GAAKsB,EAAa,EAAItB,GAAGF,OAI/BN,EAGT,SAASgC,EAAShC,GACZZ,IACF+B,EAAQnB,GACRiC,WAAW,WAAMlC,OAAAA,EAAcC,IAAQ,MAI3C,IAAMY,EAAW,SAACsB,GAGRA,OAFRA,EAAEC,iBAEMD,EAAEE,MACH,IAAA,YACHrC,EAAcuB,EAAMnC,IACpB6C,EAAS7C,GACT,MACG,IAAA,aACHY,EAAcuB,EAAMnC,GAAW,IAC/B6C,EAAS7C,GACT,MACG,IAAA,UACHY,EAAc8B,EAAM1C,IACpB6C,EAAS7C,GACT,MACG,IAAA,YACHY,EAAc8B,EAAM1C,GAAW,IAC/B6C,EAAS7C,KAKfG,EAAO+C,iBAAiB,QAAS,WAC3B/C,EAAOuB,UAAUyB,SAAS,UAC5BhD,EAAOmB,YAAc,UACrBnB,EAAOoB,UAAY,iBACnBjB,EAAc8C,QAAS,IAEvBlD,EAAQ,EACRO,EAAa8B,UAAYrC,EACzBK,EAAamB,UAAU2B,IAAI,UAC3BjD,SAASoB,oBAAoB,UAAWC,IAU1CO,EAPAhC,EAAY,CACV,CAAC,EAAG,EAAG,EAAG,GACV,CAAC,EAAG,EAAG,EAAG,GACV,CAAC,EAAG,EAAG,EAAG,GACV,CAAC,EAAG,EAAG,EAAG,KAIZgC,EAAQhC,GACRY,EAAcZ,GAEdI,SAAS8C,iBAAiB,UAAWzB","file":"main.3559584a.js","sourceRoot":"..\\src","sourcesContent":["'use strict';\n\nlet gameField;\nlet score = 0;\nlet change;\nconst button = document.querySelector('button');\nconst startMessages = document.querySelector('.message-start');\nconst loseMessages = document.querySelector('.message-lose');\nconst winMessages = document.querySelector('.message-win');\nconst elementScore = document.querySelector('.game-score');\nconst cells = document.querySelectorAll('.field-cell');\n\nfunction fillGameField(board) {\n  let count = 0;\n  let stopGame = true;\n  let cellListNum = 0;\n\n  board.forEach((element, i) => {\n    element.forEach((item, j) => {\n      if (item) {\n        cells[cellListNum].textContent = item;\n        cells[cellListNum].className = `field-cell field-cell--${item}`;\n\n        if (item === 2048) {\n          document.removeEventListener('keydown', keyPress);\n          winMessages.classList.remove('hidden');\n        }\n\n        count++;\n\n        if (item === board[i][j + 1] || (i < 3 && item === board[i + 1][j])) {\n          stopGame = false;\n        }\n      } else {\n        cells[cellListNum].textContent = '';\n        cells[cellListNum].className = 'field-cell';\n      }\n      cellListNum++;\n    });\n  });\n\n  if (count === 16 && stopGame === true) {\n    document.removeEventListener('keydown', keyPress);\n    loseMessages.classList.remove('hidden');\n  }\n}\n\nfunction gerRandom小oordinate() {\n  return Math.floor(Math.random() * 4);\n}\n\nfunction addCell(board) {\n  let row, col;\n\n  do {\n    row = gerRandom小oordinate();\n    col = gerRandom小oordinate();\n  } while (board[row][col]);\n\n  board[row][col] = Math.random() < 0.9 ? 2 : 4;\n}\n\nfunction stepX(board, reverse = false) {\n  change = false;\n\n  board.forEach((item, i) => {\n    let row = item.filter(el => el !== 0);\n\n    row = reverse ? row.reverse() : row;\n\n    row.forEach((el, j) => {\n      if (el === row[j + 1]) {\n        row[j] *= 2;\n        score += row[j];\n        elementScore.innerText = score;\n        row[j + 1] = 0;\n      }\n    });\n\n    row = row.filter(el => el !== 0);\n    row = [...row, 0, 0, 0, 0];\n    row.length = 4;\n    row = reverse ? row.reverse() : row;\n\n    if (row.toString() !== item.toString()) {\n      board[i] = row;\n      change = true;\n    }\n  });\n\n  return board;\n}\n\nfunction stepY(board, reverse = false) {\n  let rotatedBoard = board.map((el, i) =>\n    el.map((item, j) => board[j][3 - i])\n  );\n\n  rotatedBoard = stepX(rotatedBoard, reverse);\n\n  rotatedBoard.forEach((element, i) => {\n    element.forEach((item, j) => {\n      board[i][j] = rotatedBoard[3 - j][i];\n    });\n  });\n\n  return board;\n}\n\nfunction nextCell(board) {\n  if (change) {\n    addCell(board);\n    setTimeout(() => fillGameField(board), 200);\n  }\n}\n\nconst keyPress = (e) => {\n  e.preventDefault();\n\n  switch (e.code) {\n    case 'ArrowLeft':\n      fillGameField(stepX(gameField));\n      nextCell(gameField);\n      break;\n    case 'ArrowRight':\n      fillGameField(stepX(gameField, true));\n      nextCell(gameField);\n      break;\n    case 'ArrowUp':\n      fillGameField(stepY(gameField));\n      nextCell(gameField);\n      break;\n    case 'ArrowDown':\n      fillGameField(stepY(gameField, true));\n      nextCell(gameField);\n      break;\n  }\n};\n\nbutton.addEventListener('click', () => {\n  if (button.classList.contains('start')) {\n    button.textContent = 'Restart';\n    button.className = 'button restart';\n    startMessages.hidden = true;\n  } else {\n    score = 0;\n    elementScore.innerText = score;\n    loseMessages.classList.add('hidden');\n    document.removeEventListener('keydown', keyPress);\n  }\n\n  gameField = [\n    [0, 0, 0, 0],\n    [0, 0, 0, 0],\n    [0, 0, 0, 0],\n    [0, 0, 0, 0],\n  ];\n\n  addCell(gameField);\n  addCell(gameField);\n  fillGameField(gameField);\n\n  document.addEventListener('keydown', keyPress);\n});\n"]}